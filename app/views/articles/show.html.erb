<h1 class = "heading "> Show Post </h1>

<!-- Bootstrap flash success messag with remove button -->
<% if flash[:success] %>
	<div class = "error_explanation">
		<div class = "alert alert-success">
		<a href="#" class="close" data-dismiss="alert">&times;</a>	
			<%= flash[:success]%>
		</div>
	</div>
<% end %>


<!--Specific article is shown-->
<div class = "article">	
	<div class = "article_title">
		<h1> <%= @article.title %> </h1>
		<p> <%= time_tag @article.created_at %>	 </p>
	</div>
	<p class = "article_body"> <%= @article.body%> </p>


<!--link at bottom of article-->
<%= link_to "Back", root_url, class: "tool btn btn-primary" %>
<%= link_to "Edit", edit_article_path(id: @article.id), class: "tool btn btn-primary" %>
<%= link_to "Delete", article_path(id: @article.id), method: :delete, data: {confirm: "are you sure?"}, class: "tool btn btn-primary" %>
<br>
</div>


<!--Comment Error Message-->

<% if @comment.errors.any? %>
	<div class = "error_explanation">
		<div class = "alert alert-danger">
			<p>The form contains <%= pluralize(@comment.errors.count, "error")%> : </p> 

		</div>
	</div>
	<% @comment.errors.full_messages.each do |msg| %>
			<ul>
				<li> <%= msg %></li>
			</ul>
	<% end %>
<% end %>



<!--Comment form for particular post-->
<%= form_for ([@article, @comment]) do |f| %>

<h4> Add a comment! </h4>

<%= f.label "Name"%> <br>
<%= f.text_field :name, class: 'forms' %>

<br>

<%= f.label "Comments"%> <br>
<%= f.text_area :body, class:  'forms' %>

<br> 

<%= f.submit "Submit", class: 'btn btn-primary'%>
<% end %>

<br>

<!--Display all comments for the particular article-->
<h5>There are <%= pluralize(@article.comments.count, "comment")%>: </h5>

<div class = "comments container-fluid">
	<% @article.comments.each do |msg| %>
		<% if msg.id == nil %>
			<% break %>
		<% end %>
		<div class = "col-md-4 col-md-offset-1">
			<h4> <%= msg.name %> <br></h4>
			<h7><%= time_ago_in_words(msg.created_at) if msg.created_at%></h7>
			<h5><%= msg.body %></h5>

			
			<!--Comment link to delete comment-->
			<div>
				<%= link_to 'Delete', [@article, msg], method: :delete, data: { confirm: "are you sure?" }, class: "comment_btn"%>
		</div>
	</div>
</div>
<% end %>